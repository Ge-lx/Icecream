{"version":3,"sources":["mixins/websocket.js"],"names":["WebSocket","require","data","client","methods","establishConnection","user","url","vm","Promise","resolve","reject","console","log","ws","onerror","onopen","Client","connectionClosed","$emit","catch","err"],"mappings":";;;;;AAAA,IAAMA,YAAYC,QAAQ,IAAR,CAAlB;;kBAEe;AACbC,MADa,kBACL;AACN,WAAO;AACLC,cAAQ;AADH,KAAP;AAGD,GALY;;AAMbC,WAAS;AACPC,uBADO,+BACcC,IADd,EACoBC,GADpB,EACyB;AAC9B,UAAIC,KAAK,IAAT;AACA,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCC,gBAAQC,GAAR,CAAY,gCAAgCN,GAA5C;AACA,YAAIO,KAAK,IAAId,SAAJ,CAAcO,GAAd,CAAT;;AAEAO,WAAGC,OAAH,GAAaJ,MAAb;AACAG,WAAGE,MAAH,GAAY,YAAY;AACtBJ,kBAAQC,GAAR,CAAY,2BAAZ;AACAL,aAAGL,MAAH,GAAY,IAAIc,MAAJ,CAAWX,IAAX,EAAiBQ,EAAjB,EAAqBN,GAAGU,gBAAxB,EAA0CV,GAAGW,KAA7C,CAAZ;AACAT;AACD,SAJD;AAKD,OAVM,EAUJU,KAVI,CAUE,eAAO;AACdR,gBAAQC,GAAR,CAAYQ,GAAZ;AACD,OAZM,CAAP;AAaD,KAhBM;AAiBPH,oBAjBO,8BAiBa;AAClB,WAAKf,MAAL,GAAc,IAAd;AACD;AAnBM;AANI,C","file":"websocket.js","sourcesContent":["const WebSocket = require('ws')\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      client: null\r\n    }\r\n  },\r\n  methods: {\r\n    establishConnection (user, url) {\r\n      let vm = this\r\n      return new Promise((resolve, reject) => {\r\n        console.log('Connecting to websocket at ' + url)\r\n        var ws = new WebSocket(url)\r\n\r\n        ws.onerror = reject\r\n        ws.onopen = function () {\r\n          console.log('WS Connection established')\r\n          vm.client = new Client(user, ws, vm.connectionClosed, vm.$emit)\r\n          resolve()\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    connectionClosed () {\r\n      this.client = null\r\n    }\r\n  }\r\n}\r\n"]}